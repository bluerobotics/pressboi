# Changelog

All notable changes to the Pressboi firmware will be documented in this file.

## [1.2.0] - 2025-11-04

### Added
- Pause and resume functionality for move operations (move_abs, move_inc, retract)
- Move parameter storage for proper pause/resume state tracking
- Move start time tracking for timeout detection
- Force transducer integration with HX711 load cell
- Force-based move control with configurable actions (hold, skip, retract)
- Real-time force monitoring during moves with configurable force limits

### Changed
- State transition logic reordered to check motor status before timeout evaluation
- Resume operation now recalculates remaining steps at resume time (not pause time)
- Force parameter now fully functional (previously temporarily ignored)

### Fixed
- **Critical:** Fixed premature DONE messages - moves no longer send DONE immediately after START
- **Critical:** Fixed move timeout errors - `m_moveStartTime` now properly initialized for all moves
- Fixed resume calculation to use current position instead of stale pause-time position
- Fixed state machine to properly track STARTING → ACTIVE → completion transitions
- Move parameters (initial position, target steps, velocity, acceleration, torque) now properly stored for all move types

## [1.1.0] - 2025-11-03

### Added
- Reset command (replaces clear_errors) for system recovery
- Target position telemetry tracking for all move commands
- Speed limiting (100 mm/s maximum)
- Standardized DONE messages for all commands (enable, disable, home, moves, pause, resume, cancel, reset)

### Changed
- Cancel command now handles emergency stops (abort command removed)
- Force parameter temporarily ignored until force transducer implementation (uses default torque limit)
- Improved command parsing reliability

### Fixed
- Target position now updates correctly during moves (was always 0)
- Code generator permanently fixed for enum comma placement
- All autogenerated files compile without warnings

## [1.0.2] - 2025-11-03

### Added
- MIT License file
- License section in README

### Fixed
- License badge in README now displays correctly
- Release badge styling improved

## [1.0.1] - 2025-11-03

### Changed
- Enhanced README with comprehensive class and method documentation
- Added Blue Robotics and Pressboi logos
- Added detailed flashing instructions for Microchip Studio with Atmel ICE
- Added debugging workflow documentation
- Reorganized flashing methods by use case (development vs field updates)
- Added link to BR Equipment Control App
- Improved visual layout and community engagement footer

## [1.0.0] - 2025-11-03

### Added
- Initial release of Pressboi press control firmware
- Dual-motor synchronized control for press operations
- UDP/Ethernet communication with discovery protocol
- USB Serial communication support
- Command system: home, move_abs, move_inc, set_start_pos, move_to_start, enable, disable
- Pause/resume/cancel operations for any active move
- Real-time telemetry reporting (position, force, torque, motor status)
- Homing routines with configurable parameters
- Force limiting and monitoring
- State machine-based operation for reliable control

### Technical Details
- Based on ClearCore platform (SAME53 microcontroller)
- Communication: UDP port 8888, USB Serial
- Command parser with parameter extraction
- Circular message queues for Rx/Tx
- Auto-generated protocol files from JSON schemas

