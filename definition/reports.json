{
    "generate_press_report": {
        "device": "pressboi",
        "name": "Press Report",
        "description": "Generates an interactive HTML press report from the most recent log data. Must be called after stop_logging. Supports indented parameter blocks.",
        "params": [
            { "parameter": "force_min", "type": "float", "unit": "kg", "optional": true, "keyword": "force_min", "help": "Minimum force threshold for PASS (e.g., '400 kg force_min')" },
            { "parameter": "force_max", "type": "float", "unit": "kg", "optional": true, "keyword": "force_max", "help": "Maximum force threshold for PASS (e.g., '600 kg force_max')" },
            { "parameter": "endpoint_min", "type": "float", "unit": "mm", "optional": true, "keyword": "endpoint_min", "help": "Minimum endpoint threshold for PASS (e.g., '45 mm endpoint_min')" },
            { "parameter": "endpoint_max", "type": "float", "unit": "mm", "optional": true, "keyword": "endpoint_max", "help": "Maximum endpoint threshold for PASS (e.g., '55 mm endpoint_max')" },
            { "parameter": "energy_min", "type": "float", "unit": "J", "optional": true, "keyword": "energy_min", "help": "Minimum energy threshold for PASS (e.g., '0.5 J energy_min')" },
            { "parameter": "energy_max", "type": "float", "unit": "J", "optional": true, "keyword": "energy_max", "help": "Maximum energy threshold for PASS (e.g., '2.0 J energy_max')" },
            { "parameter": "title", "type": "string", "optional": true, "keyword": "title", "default": "Press Operation Report", "help": "Custom title for the report" },
            { "parameter": "open", "type": "flag", "optional": true, "keyword": "open", "help": "Open the report in browser after generation" }
        ],
        "supports_indented_block": true,
        "required_logged_variables": [
            {
                "variable": "pressboi.current_pos",
                "description": "Position data for X-axis of force curve"
            },
            {
                "variable": "pressboi.force_load_cell",
                "description": "Force data from load cell sensor",
                "alternatives": ["pressboi.force_motor_torque"]
            }
        ],
        "optional_logged_variables": [
            {
                "variable": "pressboi.joules",
                "description": "Energy expended during press operation"
            },
            {
                "variable": "pressboi.endpoint",
                "description": "Final position where press operation ended"
            }
        ],
        "must_follow": "stop_logging",
        "output": {
            "format": "html",
            "filename_template": "press_report_<serial>_<date>_<time>.html"
        },
        "telemetry_params": [
            {
                "telemetry_key": "startpoint",
                "handler_param": "press_startpoint",
                "type": "float"
            },
            {
                "telemetry_key": "press_threshold",
                "handler_param": "press_threshold",
                "type": "float"
            },
            {
                "telemetry_key": "endpoint",
                "handler_param": "telemetry_endpoint",
                "type": "float"
            }
        ],
        "handler": "reports.press_report.generate_press_report"
    }
}

